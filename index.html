<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio da Ilha Deserta</title>
   <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    :root {
        --color-bg: #0d1b2a;
        --color-bg-light: #1b263b;
        --color-card: #2a3a50;
        --color-primary: #3d8bfd;
        --color-secondary: #00f5d4;
        --color-text: #e0e1dd;
        --color-text-dark: #a9b4c2;
        --color-match: #ffc300;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        font-family: 'Poppins', sans-serif;
        color: var(--color-text);
        background: linear-gradient(-45deg, #0d1b2a, #1b263b, #2a3a50, #415a77);
        background-size: 400% 400%;
        animation: gradientBG 20s ease infinite;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
        perspective: 1000px;
    }

    @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .main-container {
        width: 100%;
        max-width: 900px;
        background: var(--color-bg-light);
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(61, 139, 253, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.1s ease-out, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        position: relative;
        backdrop-filter: blur(10px);
    }
    
    .main-container:hover {
        box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6), 0 0 120px rgba(61, 139, 253, 0.2);
    }

    .screen {
        padding: 50px 40px;
        display: none;
        flex-direction: column;
        align-items: center;
        text-align: center;
        width: 100%;
        min-height: 500px;
        justify-content: center;
    }

    .screen.active {
        display: flex;
        animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    #game-screen, #results-screen {
        justify-content: flex-start;
        min-height: auto;
    }

    @keyframes fadeIn {
        from { 
            opacity: 0; 
            transform: scale(0.95) translateY(20px);
            filter: blur(5px);
        }
        to { 
            opacity: 1; 
            transform: scale(1) translateY(0);
            filter: blur(0);
        }
    }

    h1 {
        font-size: 3rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--color-secondary), var(--color-primary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 15px;
        text-shadow: 0 0 30px rgba(0, 245, 212, 0.3);
        animation: titleGlow 3s ease-in-out infinite;
    }
    
    @keyframes titleGlow {
        0%, 100% { filter: drop-shadow(0 0 10px rgba(0, 245, 212, 0.3)); }
        50% { filter: drop-shadow(0 0 20px rgba(0, 245, 212, 0.6)); }
    }
    
    h2 {
        font-size: 2.2rem;
        color: var(--color-primary);
        margin-bottom: 20px;
        font-weight: 600;
    }
    
    h3 {
        color: var(--color-secondary);
        margin-bottom: 15px;
        font-size: 1.3rem;
        font-weight: 600;
    }

    p {
        font-size: 1.1rem;
        line-height: 1.6;
        color: var(--color-text-dark);
        max-width: 600px;
    }

    .btn {
        background: linear-gradient(135deg, var(--color-primary), #5aa3ff);
        color: white;
        border: none;
        padding: 14px 32px;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        margin: 10px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 20px rgba(61, 139, 253, 0.3);
        text-transform: uppercase;
        letter-spacing: 1.5px;
        position: relative;
        overflow: hidden;
    }
    
    .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }
    
    .btn:hover::before {
        width: 300px;
        height: 300px;
    }

    .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(61, 139, 253, 0.5);
    }
    
    .btn:active {
        transform: translateY(-1px);
    }

    .btn-secondary {
        background: linear-gradient(135deg, var(--color-card), #344a63);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .btn-secondary:hover {
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    }
    
    .btn-reveal {
        background: linear-gradient(135deg, var(--color-secondary), #00d4b8);
        color: var(--color-bg);
        font-size: 1.1rem;
        padding: 16px 40px;
        animation: revealPulse 2s ease-in-out infinite;
    }
    
    @keyframes revealPulse {
        0%, 100% { box-shadow: 0 8px 20px rgba(0, 245, 212, 0.4); }
        50% { box-shadow: 0 12px 35px rgba(0, 245, 212, 0.7); }
    }
    
    .btn-reveal:hover {
        background: linear-gradient(135deg, #00ffd5, var(--color-secondary));
        transform: scale(1.05) translateY(-3px);
    }
    
    #btn-reveal-matches {
        display: none;
        margin-top: 30px;
    }

    .player-section {
        width: 100%;
        display: none;
        flex-direction: column;
        align-items: center;
    }
    
    .player-section.active {
        display: flex;
        animation: fadeIn 0.6s ease-out;
    }

    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        width: 100%;
        margin-bottom: 20px;
    }

    .category-box {
        background: var(--color-card);
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }
    
    .category-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        border-color: rgba(61, 139, 253, 0.3);
    }

    .category-box label {
        display: block;
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--color-secondary);
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .category-box input[type="text"] {
        width: 100%;
        background: var(--color-bg-light);
        border: 2px solid var(--color-bg);
        border-radius: 8px;
        padding: 10px 12px;
        margin-bottom: 10px;
        color: var(--color-text);
        font-family: 'Poppins', sans-serif;
        font-size: 0.95rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .category-box input[type="text"]:focus {
        outline: none;
        border-color: var(--color-secondary);
        background: rgba(0, 245, 212, 0.05);
        box-shadow: 0 0 0 3px rgba(0, 245, 212, 0.1), 0 0 15px rgba(0, 245, 212, 0.2);
        transform: scale(1.02);
    }
    
    .category-box input[type="text"]::placeholder {
        color: var(--color-text-dark);
        opacity: 0.6;
    }

    #results-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        width: 100%;
        text-align: left;
    }

    .result-category-card {
        background: var(--color-card);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .result-category-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    }
    
    .result-category-card h3 {
        text-align: center;
        font-size: 1.6rem;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(0, 245, 212, 0.2);
    }

    .result-columns {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
    }
    
    .result-column {
        background: var(--color-bg-light);
        padding: 20px;
        border-radius: 10px;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }
    
    .result-column:hover {
        transform: translateY(-2px);
        border-color: rgba(61, 139, 253, 0.2);
    }
    
    .result-column h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--color-text);
        border-bottom: 2px solid var(--color-card);
        padding-bottom: 8px;
        margin-bottom: 15px;
        text-align: center;
    }
    
    .result-column.matches {
        background: linear-gradient(135deg, rgba(255, 195, 0, 0.1), rgba(255, 195, 0, 0.05));
        border-color: rgba(255, 195, 0, 0.3);
    }
    
    .result-column.matches h4 {
        color: var(--color-match);
        border-bottom-color: rgba(255, 195, 0, 0.3);
    }
    
    .result-column ul {
        list-style: none;
    }
    
    .result-column li {
        padding: 8px 12px;
        margin: 5px 0;
        font-size: 0.95rem;
        word-wrap: break-word;
        border-radius: 5px;
        background: rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
    }
    
    .result-column li:hover {
        background: rgba(0, 0, 0, 0.2);
        transform: translateX(3px);
    }
    
    .result-column .match-item {
        font-weight: 700;
        color: var(--color-match);
        background: rgba(255, 195, 0, 0.15);
        border-left: 3px solid var(--color-match);
        animation: matchPulse 2s infinite ease-in-out;
        text-shadow: 0 0 10px rgba(255, 195, 0, 0.3);
    }
    
    .result-column .match-item:hover {
        background: rgba(255, 195, 0, 0.25);
        transform: translateX(5px);
    }
    
    .result-column .no-match {
        font-style: italic;
        color: var(--color-text-dark);
        opacity: 0.6;
        text-align: center;
    }

    @keyframes matchPulse {
        0%, 100% { 
            text-shadow: 0 0 10px rgba(255, 195, 0, 0.3);
            box-shadow: 0 0 10px rgba(255, 195, 0, 0.1);
        }
        50% { 
            text-shadow: 0 0 20px rgba(255, 195, 0, 0.6);
            box-shadow: 0 0 20px rgba(255, 195, 0, 0.2);
        }
    }
    
    ::-webkit-scrollbar {
        width: 8px;
    }
    ::-webkit-scrollbar-track {
        background: var(--color-bg-light);
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
        background: var(--color-primary);
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: #4a9aff;
    }

    @media (max-width: 768px) {
        body {
            padding: 0;
            perspective: none;
            align-items: flex-start;
        }

        .main-container {
            width: 100%;
            min-height: 100vh;
            border-radius: 0;
            border: none;
            box-shadow: none;
            transform: none !important;
        }

        .screen {
            padding: 30px 20px;
            min-height: auto;
        }

        h1 {
            font-size: 2.5rem;
        }
        
        h2 {
            font-size: 1.8rem;
        }
        
        h3 {
            font-size: 1.2rem;
        }
        
        p {
            font-size: 1rem;
        }

        .btn {
            padding: 12px 28px;
            font-size: 0.9rem;
            width: 100%;
            max-width: 300px;
        }
        
        .btn-reveal {
            padding: 14px 32px;
            font-size: 1rem;
        }

        .category-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .category-box {
            padding: 20px;
        }
        
        .category-box label {
            font-size: 1.1rem;
        }

        .result-columns {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .result-column {
            background: rgba(0,0,0,0.2);
        }
        
        .result-category-card {
            padding: 20px;
        }
        
        .result-category-card h3 {
            font-size: 1.3rem;
        }
    }
    
    @media (max-width: 400px) {
        h1 {
            font-size: 2rem;
        }
        
        h2 {
            font-size: 1.5rem;
        }
        
        .screen {
            padding: 20px 15px;
        }
        
        .category-box {
            padding: 15px;
        }
        
        .result-category-card {
            padding: 15px;
        }
    }
</style>
</head>
<body>

    <div class="main-container" id="main-container">

        <div class="screen active" id="start-screen">
            <h1>üèùÔ∏è Desafio da Ilha üèùÔ∏è</h1>
            <p style="font-size: 1.2rem; margin-bottom: 30px;">Voc√™s conseguem sobreviver (com luxo) juntos?</p>
            <div class="button-group">
                <button class="btn" id="btn-play">üéÆ Come√ßar Jogo</button>
                <button class="btn btn-secondary" id="btn-rules">üìã Ver Regras</button>
            </div>
        </div>

        <div class="screen" id="rules-screen">
            <h2>üìú Regras do Jogo</h2>
            <p style="max-width: 700px; line-height: 1.8;">
                Voc√™ e seu parceiro est√£o em uma ilha deserta que j√° tem:
                <br><br>
                üè† <b>Casa confort√°vel</b><br>
                ‚ö° <b>Gerador de energia infinita</b><br>
                üíß <b>√Ågua pot√°vel √† vontade</b><br>
                üì∫ <b>TV</b> (para assistir os filmes que voc√™ levar)<br>
                üéÆ <b>Todos os consoles e um PC</b> (para jogar os games que escolher)
                <br><br>
                <span style="color: var(--color-secondary); font-weight: 600;">
                Cada um deve escolher 5 itens para 7 categorias diferentes.
                </span>
                <br>
                Descubram quais escolhas voc√™s t√™m em comum! ‚ù§Ô∏è
            </p>
            <button class="btn btn-secondary" id="btn-back-to-start">‚Üê Voltar</button>
        </div>

        <div class="screen" id="game-screen">
            
            <div class="player-section active" id="player1-section">
                <h2>üéÆ Vez do Jogador 1</h2>
                <p style="margin-bottom: 25px;">Preencha suas 5 escolhas para cada categoria abaixo:</p>
                <form id="player1-form" class="category-grid"></form>
                <button class="btn" id="btn-confirm-p1">‚úì Confirmar Escolhas</button>
            </div>
            
            <div class="player-section" id="player2-section">
                <h2>üéØ Vez do Jogador 2</h2>
                <p style="margin-bottom: 25px; color: var(--color-match);">Agora √© sua vez! Sem espiar as respostas do Jogador 1! üëÄ</p>
                <form id="player2-form" class="category-grid"></form>
                <button class="btn" id="btn-confirm-p2">‚úì Confirmar Escolhas</button>
            </div>
            
            <button class="btn btn-reveal" id="btn-reveal-matches">‚ú® Revelar Matches ‚ú®</button>
            
        </div>
        
        <div class="screen" id="results-screen">
            <h2>üéâ Resultados e Matches! üéâ</h2>
            <p style="margin-bottom: 30px;">Vejam onde voc√™s concordam e onde s√£o totalmente diferentes:</p>
            <div id="results-grid"></div>
            <button class="btn btn-secondary" id="btn-play-again">üîÑ Jogar Novamente</button>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const CATEGORIES = [
                { id: 'jogos', label: 'üéÆ 5 Jogos' },
                { id: 'vestimentas', label: 'üëï 5 Vestimentas' },
                { id: 'objetos', label: 'üîß 5 Objetos' },
                { id: 'filmes', label: 'üé¨ 5 Filmes' },
                { id: 'comidas', label: 'üçï 5 Comidas' },
                { id: 'livros', label: 'üìö 5 Livros' },
                { id: 'bebidas', label: 'ü•§ 5 Bebidas' }
            ];

            const mainContainer = document.getElementById('main-container');
            
            const screens = {
                start: document.getElementById('start-screen'),
                rules: document.getElementById('rules-screen'),
                game: document.getElementById('game-screen'),
                results: document.getElementById('results-screen')
            };

            const playerSections = {
                p1: document.getElementById('player1-section'),
                p2: document.getElementById('player2-section')
            };

            const forms = {
                p1: document.getElementById('player1-form'),
                p2: document.getElementById('player2-form')
            };
            
            const resultsGrid = document.getElementById('results-grid');

            const buttons = {
                play: document.getElementById('btn-play'),
                rules: document.getElementById('btn-rules'),
                back: document.getElementById('btn-back-to-start'),
                confirmP1: document.getElementById('btn-confirm-p1'),
                confirmP2: document.getElementById('btn-confirm-p2'),
                reveal: document.getElementById('btn-reveal-matches'),
                playAgain: document.getElementById('btn-play-again')
            };
            
            let player1Choices = {};
            let player2Choices = {};

            function showScreen(screenName) {
                Object.values(screens).forEach(screen => screen.classList.remove('active'));
                screens[screenName].classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function populateForm(formElement) {
                let html = '';
                CATEGORIES.forEach(category => {
                    html += `<div class="category-box" data-category="${category.id}">`;
                    html += `<label for="${formElement.id}-${category.id}">${category.label}</label>`;
                    for (let i = 1; i <= 5; i++) {
                        html += `<input type="text" id="${formElement.id}-${category.id}-${i}" placeholder="Item ${i}" required>`;
                    }
                    html += `</div>`;
                });
                formElement.innerHTML = html;
            }

            function getChoices(formElement) {
                let choices = {};
                let isValid = true;
                
                CATEGORIES.forEach(category => {
                    choices[category.id] = [];
                    const inputs = formElement.querySelectorAll(`[data-category="${category.id}"] input`);
                    inputs.forEach(input => {
                        const value = input.value.trim();
                        if (value) {
                            choices[category.id].push(value);
                        }
                    });
                    
                    if (choices[category.id].length === 0) {
                        isValid = false;
                        inputs[0].focus();
                    }
                });

                if (!isValid) {
                    alert('Por favor, preencha pelo menos um item em cada categoria!');
                    return null;
                }
                
                return choices;
            }
            
            function normalize(str) {
                return str.toLowerCase().trim()
                          .normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            }

            function displayResults() {
                resultsGrid.innerHTML = '';
                
                CATEGORIES.forEach(category => {
                    const p1List = player1Choices[category.id].map(normalize);
                    const p2List = player2Choices[category.id].map(normalize);
                    
                    const p1Original = player1Choices[category.id];
                    const p2Original = player2Choices[category.id];
                    
                    let matches = [];
                    let p1Only = [];
                    let p2Only = [];

                    p1Original.forEach((item, index) => {
                        const normalizedItem = p1List[index];
                        if (p2List.includes(normalizedItem)) {
                            matches.push(item);
                        } else {
                            p1Only.push(item);
                        }
                    });

                    p2Original.forEach((item, index) => {
                        const normalizedItem = p2List[index];
                        if (!p1List.includes(normalizedItem)) {
                            p2Only.push(item);
                        }
                    });

                    const cardHTML = `
                        <div class="result-category-card">
                            <h3>${category.label}</h3>
                            <div class="result-columns">
                                <div class="result-column">
                                    <h4>Jogador 1</h4>
                                    <ul id="p1-list-${category.id}"></ul>
                                </div>
                                <div class="result-column matches">
                                    <h4>‚ù§Ô∏è Matches ‚ù§Ô∏è</h4>
                                    <ul id="match-list-${category.id}"></ul>
                                </div>
                                <div class="result-column">
                                    <h4>Jogador 2</h4>
                                    <ul id="p2-list-${category.id}"></ul>
                                </div>
                            </div>
                        </div>
                    `;
                    resultsGrid.insertAdjacentHTML('beforeend', cardHTML);
                    
                    const p1ListEl = document.getElementById(`p1-list-${category.id}`);
                    const p2ListEl = document.getElementById(`p2-list-${category.id}`);
                    const matchListEl = document.getElementById(`match-list-${category.id}`);
                    
                    p1Only.length ? p1Only.forEach(item => p1ListEl.innerHTML += `<li>${item}</li>`) : p1ListEl.innerHTML = `<li class="no-match">Nenhum</li>`;
                    p2Only.length ? p2Only.forEach(item => p2ListEl.innerHTML += `<li>${item}</li>`) : p2ListEl.innerHTML = `<li class="no-match">Nenhum</li>`;
                    matches.length ? matches.forEach(item => matchListEl.innerHTML += `<li class="match-item">${item}</li>`) : matchListEl.innerHTML = `<li class="no-match">Nenhum match</li>`;
                });
                
                showScreen('results');
            }

            mainContainer.addEventListener('mousemove', (e) => {
                if (window.innerWidth > 768) {
                    const rect = mainContainer.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;

                    const rotateX = (y / rect.height) * -10;
                    const rotateY = (x / rect.width) * 10;

                    mainContainer.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
                }
            });

            mainContainer.addEventListener('mouseleave', () => {
                mainContainer.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)';
            });

            buttons.play.addEventListener('click', () => {
                showScreen('game');
                playerSections.p1.classList.add('active');
                playerSections.p2.classList.remove('active');
                buttons.reveal.style.display = 'none';
            });
            
            buttons.rules.addEventListener('click', () => showScreen('rules'));
            buttons.back.addEventListener('click', () => showScreen('start'));

            buttons.confirmP1.addEventListener('click', (e) => {
                e.preventDefault();
                const choices = getChoices(forms.p1);
                if (choices) {
                    player1Choices = choices;
                    
                    buttons.confirmP1.textContent = '‚úì Confirmado!';
                    buttons.confirmP1.style.background = 'linear-gradient(135deg, #00d4b8, var(--color-secondary))';
                    
                    setTimeout(() => {
                        playerSections.p1.classList.remove('active');
                        playerSections.p2.classList.add('active');
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        buttons.confirmP1.textContent = '‚úì Confirmar Escolhas';
                        buttons.confirmP1.style.background = '';
                    }, 800);
                }
            });

            buttons.confirmP2.addEventListener('click', (e) => {
                e.preventDefault();
                const choices = getChoices(forms.p2);
                if (choices) {
                    player2Choices = choices;
                    
                    buttons.confirmP2.textContent = '‚úì Confirmado!';
                    buttons.confirmP2.style.background = 'linear-gradient(135deg, #00d4b8, var(--color-secondary))';
                    
                    setTimeout(() => {
                        playerSections.p2.classList.remove('active');
                        buttons.reveal.style.display = 'block';
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        buttons.confirmP2.textContent = '‚úì Confirmar Escolhas';
                        buttons.confirmP2.style.background = '';
                    }, 800);
                }
            });

            buttons.reveal.addEventListener('click', displayResults);
            
            buttons.playAgain.addEventListener('click', () => {
                forms.p1.reset();
                forms.p2.reset();
                player1Choices = {};
                player2Choices = {};
                showScreen('start');
            });
            
            populateForm(forms.p1);
            populateForm(forms.p2);
            showScreen('start');
        });
    </script>
</body>
</html>
